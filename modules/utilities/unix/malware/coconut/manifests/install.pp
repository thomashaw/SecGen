class coconut::install {
  $secgen_parameters = secgen_functions::get_parameters($::base64_inputs_file)
  $account = parsejson($secgen_parameters['account'][0])
  $username = $account['username']

  # Generate the C file (either in the home directory or the supplied storage_directory)
  $install_dir = "/home/$username"
  $c_file_path = "$install_dir/coconut.c"

  file { 'coconut.c':
    path                    => $c_file_path,
    source                 => 'puppet:///modules/coconut/coconut.c',
    # content                 => template('coconut/coconut.c.erb'),  % TODO: Later
    mode                    => '0777',
  }

   # ::secgen_functions::install_setgid_binary { "coconut":
   #  source_module_name => 'coconut',
   #  challenge_name     => 'coconut',
   #  c_file             => $c_file_path,
   #  account            => $account,
   #  group              => $username,
   #  storage_dir        => $install_dir,
   # }
}
